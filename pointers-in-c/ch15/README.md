# 第15章 输入/输出函数

---
### 问题

#### 1. 如果对fopen函数的返回值不进行错误检查可能会出现什么后果？
* 和对NULL指针进行操作的结果一样。

---
#### 2. 如果是对一个从未打开过的流进行I/O操作会发生什么情况？
* 这个和对一个未初始化的指针进行操作一样。

---
#### 3. 如果一个`fclose`调用失败，但程序并未对它的返回值进行错误检查可能会出现什么后果？
* 没什么后果。

---
#### 4. 如果一个程序在执行时它的标准输入已重定向到一个文件，程序是如何检测到这个情况？
* 这个是通过运行时后面加上重定向符号及参数实现的，可能是操作系统提供的接口。

---
#### 5. 如果调用`fgets`函数时使用一个长度为1的缓冲区会发生什么？长度为2呢？
* 我求您别再做这些愚蠢操作了。
* 长度为1那每次输入都是'\0'，这个函数就废了，编译器应该会报错。
* 长度为2那每次读1个字符。

---
#### 6. 为了保证下面这条sprintf语句所产生的字符串不溢出，缓冲区至少应该为多大？假定你的机器的整数的长度是2个字节。
``` c
sprintf(buffer, "%d %c %x", a, b, c);
```
* 那至少得是2 + 1 + 1 + 1 + 2 = 7个字节。

---
#### 7. 为了保证下面这条sprintf语句所产生的字符串不溢出，缓冲区至少应该有多大？
``` c
sprintf(buffer, "%s", a);
```
* `sizeof(a)`

---
#### 8. `%f`格式代码所打印的最后一位数字是经过四舍五入呢？还是未打印的数字被简单的截掉？
* 四舍五入。

---
#### 9. 你如何得到`perror`函数可能打印的所有错误信息列表？
* 我不到啊。

---
#### 10. 为什么`fprintf`、`fscanf`、`fputs`、`fclose`函数都接受一个指向FILE结构的指针作为参数而不是FILE结构本身？
* 因为可能会修改FILE结构内的变量值，传指针方便。
* 能传指针就传指针，不要再问这种愚蠢的问题了。

---
#### 11. 你希望打开一个文件进行写入，假定(1)你不希望文件原先的内容丢失，(2)你希望能够写入到文件的任何位置。那么你该怎样设置打开模式呢？
* r+

---
#### 12. 为什么需要`freopen`函数？
* 可能是为了快速更换打开模式。

---
#### 13. 对于绝大多数程序，你觉得有必要考虑`fgetc(stdin)`或`getchar`哪个更好吗？
* 并不需要，带来的影响差别并不大。

---
#### 14. 在你的系统上，下面的语句将打印什么内容？
``` c
printf("%d\n", 3.14);
```
* 打印结果如下：  
> 3

---
#### 15. 请解释使用`%-6.10s`格式代码将打印出什么形式的字符串？
* 左对齐，字符串最少占6位，不够的话用空格补。

---
#### 16. 当一个特定的值用格式代码`%.3f`打印时，其结果是1.405。但这个值用格式代码`%.2f`打印时，其结果是1.40。似乎出现了明显的错误，请解释原因。
* 当这个值是1.4049时这个现象就会发生，都是四舍五入的后果。

---

### 编程练习

#### 1. 
* pe15.1.c

#### 2. 
* pe15.2.c

#### 3. 
* pe15.3.c

#### 4. 
* pe15.4.c

#### 5. 
* pe15.5.c

#### 6. 
* pe15.6.c

#### 7. 
* pe15.7.c

#### 8. 
* pe15.8.c

#### 9. 
* pe15.9.c

#### 10. 
* pe15.10.c

#### 11. 
* 这道题留给有缘人。

---